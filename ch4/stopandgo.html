<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Stop &amp; Go | Welcome to International NodeBots Day 2015</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.1.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
    

        
    
    
    <link rel="next" href="../ch4/lightbot.html" />
    
    
    <link rel="prev" href="../ch4/index.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="5.1" data-basepath=".." data-revision="Sat Jul 25 2015 00:39:48 GMT-0400 (EDT)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="ch1/index.html">
            
                
                    <a href="../ch1/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Robots are fun?
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="ch1/schedule.html">
            
                
                    <a href="../ch1/schedule.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Schedule of Activities
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="ch2/index.html">
            
                
                    <a href="../ch2/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Particle Core Development Setup
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="ch2/installation.html">
            
                
                    <a href="../ch2/installation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Install Node.js and Particle CLI
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="ch2/particleSetup.html">
            
                
                    <a href="../ch2/particleSetup.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Particle Core Setup
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="ch3/index.html">
            
                
                    <a href="../ch3/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Sumobot Instructions
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="ch3/helloworld.html">
            
                
                    <a href="../ch3/helloworld.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Hello World
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="ch3/assembly.html">
            
                
                    <a href="../ch3/assembly.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Assembly
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="ch3/connectParticleCore.html">
            
                
                    <a href="../ch3/connectParticleCore.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Connecting the brain (Particle Core)
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="ch4/index.html">
            
                
                    <a href="../ch4/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Coding Up Your New Robot!
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="5.1" data-path="ch4/stopandgo.html">
            
                
                    <a href="../ch4/stopandgo.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Stop &amp; Go
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="ch4/lightbot.html">
            
                
                    <a href="../ch4/lightbot.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Lightbot
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="ch5/index.html">
            
                
                    <a href="../ch5/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Resources/Links for Making Robots
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="ch6/index.html">
            
                
                    <a href="../ch6/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        What Now? What to do when Robot comes home.
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="8" data-path="ch7/index.html">
            
                
                    <a href="../ch7/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Special Thanks and Sponsors
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Welcome to International NodeBots Day 2015</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="stop-go-project">Stop &amp; Go project</h1>
<p>This customization will add two LED&#x2019;s, red and green, that light up according to the state of the SumoBot: red if stopped and green if moving. This may not seem like a very interesting customization since you can observe this state by just looking at the bot, but it serves to expose you to programming other forms of output with the existing control mechanism.</p>
<p>The following items can be found at AdaFruit.com:</p>
<ul>
<li><a href="http://www.adafruit.com/products/297" target="_blank">Red LED</a></li>
<li><a href="http://www.adafruit.com/products/300" target="_blank">Green LED</a></li>
</ul>
<p><img src="../images/sumo-leds.jpg" alt="Sumo LEDs"></p>
<p>The following diagram describe the circuit layout for the controller board:</p>
<p><img src="../images/sumo-leds-spark-circuit.png" alt="Circuit Layout"></p>
<p>Here&apos;s the code that will run the Stop &amp; Go:</p>
<pre><code class="lang-js">
<span class="hljs-keyword">var</span> keypress = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;keypress&quot;</span>);
<span class="hljs-keyword">var</span> Spark = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;spark-io&quot;</span>);
<span class="hljs-keyword">var</span> five = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;johnny-five&quot;</span>);
<span class="hljs-keyword">var</span> Sumobot = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;sumobot&quot;</span>)(five);

keypress(process.stdin);

<span class="hljs-keyword">var</span> board = <span class="hljs-keyword">new</span> five.Board({
  io: <span class="hljs-keyword">new</span> Spark({
    token: process.env.SPARK_TOKEN,
    deviceId: process.env.SPARK_DEVICE
  })
});

board.on(<span class="hljs-string">&quot;ready&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Welcome to Sumobot Jr: Stop &amp; Go!&quot;</span>);

  <span class="hljs-keyword">var</span> bot = <span class="hljs-keyword">new</span> Sumobot({
    left: <span class="hljs-string">&quot;D0&quot;</span>,
    right: <span class="hljs-string">&quot;D1&quot;</span>,
    speed: <span class="hljs-number">0.50</span>
  });

  <span class="hljs-keyword">var</span> red = <span class="hljs-keyword">new</span> five.Led(<span class="hljs-string">&quot;D4&quot;</span>);
  <span class="hljs-keyword">var</span> green = <span class="hljs-keyword">new</span> five.Led(<span class="hljs-string">&quot;D3&quot;</span>);
  <span class="hljs-keyword">var</span> leds = <span class="hljs-keyword">new</span> five.Leds([red, green]);

  <span class="hljs-comment">// Maps key names to bot methods</span>
  <span class="hljs-keyword">var</span> actions = {
    up: <span class="hljs-string">&quot;fwd&quot;</span>,
    down: <span class="hljs-string">&quot;rev&quot;</span>,
    left: <span class="hljs-string">&quot;left&quot;</span>,
    right: <span class="hljs-string">&quot;right&quot;</span>,
    space: <span class="hljs-string">&quot;stop&quot;</span>
  };

  <span class="hljs-comment">// Ensure the bot is stopped</span>
  bot.stop();
  leds.off();

  <span class="hljs-comment">// A bit of keypress ceremony ;)</span>
  process.stdin.resume();
  process.stdin.setEncoding(<span class="hljs-string">&quot;utf8&quot;</span>);
  process.stdin.setRawMode(<span class="hljs-literal">true</span>);

  process.stdin.on(<span class="hljs-string">&quot;keypress&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ch, key)</span> </span>{
    <span class="hljs-keyword">var</span> action;

    <span class="hljs-keyword">if</span> (!key) {
      <span class="hljs-keyword">return</span>;
    }

    leds.off();

    action = actions[key.name] || key.name;

    <span class="hljs-keyword">if</span> (action == <span class="hljs-string">&quot;q&quot;</span>) {
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Quitting&quot;</span>);
      bot.stop();
      setTimeout(process.exit, <span class="hljs-number">500</span>);
    }

    <span class="hljs-keyword">if</span> (bot[action]) {
      bot[action]();

      <span class="hljs-keyword">if</span> (action === <span class="hljs-string">&quot;stop&quot;</span>) {
        red.on();
      } <span class="hljs-keyword">else</span> {
        green.on();
      }
    }
  });
});
</code></pre>
<p>Don&apos;t forget, for the above code to work, you&apos;ll need to install the node modules:</p>
<p><code>npm install keypress spark-io johnny-five sumobot</code></p>
<p>Here&apos;s a video of it in action:</p>
<video controls class="blog-full-width-block" style="display: inline-block;width: 100%;margin: 0 0 1em 0;">
  <source src="https://dl.dropboxusercontent.com/u/3531958/sumobot/sumo-stop-go.mp4">
  <source src="https://dl.dropboxusercontent.com/u/3531958/sumobot/sumo-stop-go.webm">  
  <source src="https://dl.dropboxusercontent.com/u/3531958/sumobot/sumo-stop-go.ogv">
  <iframe width="420" height="315" src="//www.youtube.com/embed/wC86w0fX79s" frameborder="0" allowfullscreen></iframe>
</video>

<p>These instructions are adapted from <a href="https://bocoup.com/weblog/customizing-the-robotsconf-sumobot-with-johnny-five/" target="_blank">Customizing the RobotsConf Sumobot with Johnny-Five</a> by <a href="https://twitter.com/rwaldron" target="_blank">Rick Waldron, creator of Johnny Five</a></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../ch4/index.html" class="navigation navigation-prev " aria-label="Previous page: Coding Up Your New Robot!"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../ch4/lightbot.html" class="navigation navigation-next " aria-label="Next page: Lightbot"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
